<script>
const W={
a:[],l:'en',ld:!1,lk:new Map,pq:[],pl:!1,
langs:[['en','English','üá¨üáß'],['es','Espa√±ol','üá™üá∏'],['fr','Fran√ßais','üá´üá∑'],['de','Deutsch','üá©üá™'],['it','Italiano','üáÆüáπ'],['pt','Portugu√™s','üáµüáπ'],['ru','–†—É—Å—Å–∫–∏–π','üá∑üá∫'],['ja','Êó•Êú¨Ë™û','üáØüáµ'],['zh','‰∏≠Êñá','üá®üá≥'],['ar','ÿßŸÑÿπÿ±ÿ®Ÿäÿ©','üá∏üá¶'],['hi','‡§π‡§ø‡§®‡•ç‡§¶‡•Ä','üáÆüá≥'],['ko','ÌïúÍµ≠Ïñ¥','üá∞üá∑'],['nl','Nederlands','üá≥üá±'],['pl','Polski','üáµüá±']],
init(){
const s=localStorage.getItem('lk');
if(s)try{this.lk=new Map(JSON.parse(s))}catch{}
document.getElementById('ld').innerHTML=this.langs.map(([c,n,f])=>`<div class="language-option" data-l="${c}" data-n="${n}"><span class="flag">${f}</span> ${n}</div>`).join('');
document.getElementById('lb').onclick=()=>document.getElementById('ld').classList.toggle('active');
document.getElementById('ld').onclick=e=>{
const o=e.target.closest('.language-option');
if(o){
this.l=o.dataset.l;
document.getElementById('cl').textContent=o.dataset.n;
document.getElementById('ld').classList.remove('active');
this.a=[];this.pq=[];
document.getElementById('fc').innerHTML='<div class="loading-spinner"><div class="spinner"></div></div>';
this.load();
}
};
document.onclick=e=>{
if(!e.target.closest('.language-selector'))
document.getElementById('ld').classList.remove('active');
};
document.getElementById('lkb').onclick=()=>this.toggleLikesPanel();
document.getElementById('fc').onscroll=()=>{
const f=document.getElementById('fc');
if(f.scrollHeight-f.scrollTop-f.clientHeight<1500&&!this.ld)this.load();
};
document.onkeydown=e=>{
const c=document.querySelectorAll('.article-card');
if(!c.length)return;
const i=Math.floor(document.getElementById('fc').scrollTop/window.innerHeight);
if(e.key==='ArrowDown'||e.key===' '){
e.preventDefault();
c[Math.min(i+1,c.length-1)].scrollIntoView({behavior:'smooth'});
}else if(e.key==='ArrowUp'){
e.preventDefault();
c[Math.max(i-1,0)].scrollIntoView({behavior:'smooth'});
}
};
this.updateLikesCount();
this.load();
this.startPreload();
},
async startPreload(){
setInterval(async()=>{
if(this.pq.length<10&&!this.pl){
this.pl=!0;
try{
const r=await Promise.allSettled([...Array(5)].map(()=>
fetch(`https://${this.l}.wikipedia.org/api/rest_v1/page/random/summary`)
.then(r=>r.ok?r.json():null)
.then(d=>{
if(d){
const a={id:d.pageid,t:d.title,e:d.extract||'No description available.',i:d.thumbnail?.source||'',u:d.content_urls?.desktop?.page||'#'};
if(a.i)new Image().src=a.i;
return a;
}
return null;
})
));
this.pq.push(...r.filter(x=>x.status==='fulfilled'&&x.value).map(x=>x.value));
}catch{}finally{this.pl=!1;}
}
},2000);
},
async load(){
if(this.ld)return;
this.ld=!0;
try{
let a;
if(this.pq.length>=5){
a=this.pq.splice(0,5);
}else{
const r=await Promise.allSettled([...Array(5)].map(()=>
fetch(`https://${this.l}.wikipedia.org/api/rest_v1/page/random/summary`)
.then(r=>r.ok?r.json():null)
.then(d=>d?{id:d.pageid,t:d.title,e:d.extract||'No description available.',i:d.thumbnail?.source||'',u:d.content_urls?.desktop?.page||'#'}:null)
));
a=r.filter(x=>x.status==='fulfilled'&&x.value).map(x=>x.value);
}
this.a.push(...a);
this.render(a);
if(this.a.length===5){
document.getElementById('si').style.display='flex';
setTimeout(()=>document.getElementById('si').style.display='none',5000);
}
}catch(e){
this.showError();
}finally{
this.ld=!1;
}
},
render(a){
const s=document.querySelector('.loading-spinner');
if(s)s.remove();
const f=document.getElementById('fc');
a.forEach((r,idx)=>{
if(!r)return;
const d=document.createElement('div');
d.className='article-card';
d.dataset.id=r.id;
d.innerHTML=`<div class="article-background">${r.i?`<img src="${r.i}" alt="" loading="lazy">`:''}</div>
<div class="article-content">
${r.i?`<img src="${r.i}" alt="${r.t}" class="article-image" loading="lazy">`:''}
<h2 class="article-title">${r.t}</h2>
<p class="article-excerpt">${r.e}</p>
<div class="article-actions">
<button class="action-button${this.lk.has(r.id)?' liked':''}" onclick="W.toggleLike(${r.id})">
<span class="action-icon">${this.lk.has(r.id)?'‚ù§Ô∏è':'ü§ç'}</span>
<span>${this.lk.has(r.id)?'Liked':'Like'}</span>
</button>
<button class="action-button" onclick="W.share('${r.u}','${r.t.replace(/'/g,"\\'")}')">
<span class="action-icon">üì§</span><span>Share</span>
</button>
<button class="action-button primary" onclick="window.open('${r.u}','_blank')">
<span class="action-icon">üìñ</span><span>Read Full Article</span>
</button>
</div></div>`;
this.setupDoubleTap(d,r.id);
f.appendChild(d);
});
},
setupDoubleTap(el,id){
let lt=0;
el.addEventListener('touchstart',e=>{
const n=Date.now();
if(n-lt<300){
e.preventDefault();
const x=e.touches[0].clientX;
const y=e.touches[0].clientY;
this.toggleLike(id);
this.showHeart(x,y);
}
lt=n;
});
},
showHeart(x,y){
const h=document.createElement('div');
h.className='like-heart';
h.innerHTML='‚ù§Ô∏è';
h.style.left=x+'px';
h.style.top=y+'px';
document.body.appendChild(h);
setTimeout(()=>h.remove(),800);
},
toggleLike(id){
const a=this.a.find(x=>x&&x.id===id);
if(!a)return;
if(this.lk.has(id))this.lk.delete(id);
else this.lk.set(id,a);
localStorage.setItem('lk',JSON.stringify([...this.lk]));
this.updateLikesCount();
const c=document.querySelector(`.article-card[data-id="${id}"]`);
if(c){
const b=c.querySelector('.action-button');
if(b){
b.classList.toggle('liked');
b.innerHTML=this.lk.has(id)?'<span class="action-icon">‚ù§Ô∏è</span><span>Liked</span>':'<span class="action-icon">ü§ç</span><span>Like</span>';
}
}
},
updateLikesCount(){
const c=this.lk.size;
const e=document.getElementById('lc');
if(c>0){e.textContent=c;e.style.display='inline-block'}
else e.style.display='none';
},
toggleLikesPanel(){
document.getElementById('lp').classList.toggle('active');
if(document.getElementById('lp').classList.contains('active'))this.renderLikes();
},
renderLikes(){
const l=document.getElementById('lal');
if(this.lk.size===0){
l.innerHTML='<div class="no-likes">No liked articles yet.<br>Start scrolling to discover!</div>';
return;
}
l.innerHTML=[...this.lk.values()].reverse().map(a=>`
<div class="liked-article-item">
<div class="liked-article-title">${a.t}</div>
<div class="liked-article-excerpt">${a.e}</div>
<div class="liked-article-actions">
<span class="mini-action" onclick="window.open('${a.u}','_blank')">Read</span>
<span class="mini-action" onclick="W.share('${a.u}','${a.t.replace(/'/g,"\\'")}')">Share</span>
<span class="mini-action" onclick="W.removeLike(${a.id})">Remove</span>
</div></div>`).join('');
},
removeLike(id){
this.lk.delete(id);
localStorage.setItem('lk',JSON.stringify([...this.lk]));
this.updateLikesCount();
this.renderLikes();
const c=document.querySelector(`.article-card[data-id="${id}"]`);
if(c){
const b=c.querySelector('.action-button');
if(b){
b.classList.remove('liked');
b.innerHTML='<span class="action-icon">ü§ç</span><span>Like</span>';
}
}
},
share(u,t){
if(navigator.share)navigator.share({title:t,url:u}).catch(()=>{});
else navigator.clipboard.writeText(u).then(()=>alert('Link copied!')).catch(()=>{});
},
showAbout(){
alert('WikiScroll\n\nAn infinite scrolling interface for exploring random Wikipedia articles in multiple languages.\n\nSwipe or scroll to discover fascinating articles from Wikipedia!\n\nContact: contact@wikiscroll.com');
},
showError(){
const d=document.createElement('div');
d.className='article-card';
d.innerHTML='<div class="article-content"><div class="error-message"><h2>Oops! Something went wrong</h2><p>Failed to load articles. Please check your connection and try again.</p><button class="action-button" onclick="location.reload()">üîÑ Retry</button></div></div>';
document.getElementById('fc').appendChild(d);
}
};
W.init();
</script> class="liked-article-item">
<div class="liked-article-title">${a.t}</div>
<div class="liked-article-excerpt">${a.e}</div>
<div class="liked-article-actions">
<span class="mini-action" onclick="window.open('${a.u}','_blank')">Read</span>
<span class="mini-action" onclick="W.share('${a.u}','${a.t.replace(/'/g,"\\'")}')">Share</span>
<span class="mini-action" onclick="W.removeLike(${a.id})">Remove</span>
</div></div>`).join('');
},
removeLike(id){
this.lk.delete(id);
localStorage.setItem('lk',JSON.stringify([...this.lk]));
this.updateLikesCount();
this.renderLikes();
const c=document.querySelector(`.article-card[data-id="${id}"]`);
if(c){
const b=c.querySelector('.action-button');
if(b){
b.classList.remove('liked');
b.innerHTML='<span class="action-icon">ü§ç</span><span>Like</span>';
}
}
},
share(u,t){
if(navigator.share)navigator.share({title:t,url:u}).catch(()=>{});
else navigator.clipboard.writeText(u).then(()=>alert('Link copied!')).catch(()=>{});
},
showAbout(){
alert('WikiScroll\n\nAn infinite scrolling interface for exploring random Wikipedia articles in multiple languages.\n\nSwipe or scroll to discover fascinating articles from Wikipedia!\n\nContact: contact@wikiscroll.com');
},
showError(){
const d=document.createElement('div');
d.className='article-card';
d.innerHTML='<div class="article-content"><div class="error-message"><h2>Oops! Something went wrong</h2><p>Failed to load articles. Please check your connection and try again.</p><button class="action-button" onclick="location.reload()">üîÑ Retry</button></div></div>';
document.getElementById('fc').appendChild(d);
}
};
W.init();
</script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>WikiScroll - Discover Wikipedia</title>
    <meta name="description" content="An infinite scrolling interface for exploring random Wikipedia articles in multiple languages">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#000">
    <style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Fira Sans','Droid Sans','Helvetica Neue',sans-serif;background:#000;color:#fff;overflow-x:hidden}.app{height:100vh;overflow:hidden;position:relative}.header{position:fixed;top:0;left:0;right:0;z-index:100;background:linear-gradient(to bottom,rgba(0,0,0,.9),transparent);padding:20px 24px;display:flex;justify-content:space-between;align-items:center}.logo{font-size:32px;font-weight:700;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-.5px}.controls{display:flex;gap:12px;align-items:center}.about-button,.language-button,.likes-button{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:20px;padding:8px 16px;color:#fff;cursor:pointer;font-size:14px;font-weight:600;transition:all .3s ease;display:flex;align-items:center;gap:8px;height:36px;position:relative}.about-button:hover,.language-button:hover,.likes-button:hover{background:rgba(255,255,255,.2)}.likes-button .likes-badge{background:#764ba2;color:#fff;font-size:10px;font-weight:700;padding:1px 4px;border-radius:8px;min-width:16px;text-align:center;line-height:14px}.flag{font-size:18px}.language-selector{position:relative}.language-dropdown{position:absolute;top:100%;right:0;margin-top:8px;background:rgba(20,20,20,.95);backdrop-filter:blur(10px);border-radius:12px;padding:8px;min-width:200px;display:none;box-shadow:0 10px 40px rgba(0,0,0,.5);max-height:400px;overflow-y:auto}.language-dropdown.active{display:block}.language-option{padding:10px 12px;cursor:pointer;border-radius:8px;display:flex;align-items:center;gap:10px;transition:background .2s}.language-option:hover{background:rgba(255,255,255,.1)}.language-option .flag{font-size:20px}.feed-container{height:100vh;overflow-y:scroll;scroll-snap-type:y mandatory;scrollbar-width:none;-ms-overflow-style:none;scroll-behavior:smooth}.feed-container::-webkit-scrollbar{display:none}.article-card{height:100vh;scroll-snap-align:start;position:relative;display:flex;align-items:center;justify-content:center;background:#000}.article-background{position:absolute;inset:0;z-index:0}.article-background img{width:100%;height:100%;object-fit:cover;opacity:.3;filter:blur(30px)}.article-content{position:relative;z-index:1;max-width:85%;width:800px;padding:20px;background:rgba(0,0,0,.75);backdrop-filter:blur(20px);border-radius:24px;border:1px solid rgba(255,255,255,.1);height:fit-content;max-height:70vh;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,.5);display:flex;flex-direction:column;justify-content:space-between}.article-image{width:100%;height:280px;object-fit:contain;background:rgba(0,0,0,.2);border-radius:16px;margin-bottom:12px;flex-shrink:0}.article-title{font-size:24px;font-weight:700;margin-bottom:10px;line-height:1.2;letter-spacing:-.5px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;flex-shrink:0}.article-excerpt{font-size:15px;line-height:1.4;color:rgba(255,255,255,.9);margin-bottom:12px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;flex-shrink:1;min-height:0;max-height:42px}.article-actions{display:flex;gap:12px;align-items:center;flex-shrink:0;flex-wrap:wrap;margin-top:auto}.action-button{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:14px;padding:14px 24px;color:#fff;cursor:pointer;font-size:15px;font-weight:500;transition:all .3s ease;display:flex;align-items:center;gap:10px;backdrop-filter:blur(10px)}.action-button:hover{background:rgba(255,255,255,.2);transform:translateY(-2px);box-shadow:0 10px 30px rgba(0,0,0,.3)}.action-button.liked{background:rgba(239,68,68,.2);border-color:rgba(239,68,68,.5)}.action-button.primary{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border:none;flex:1;white-space:nowrap}.action-button.primary:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 10px 30px rgba(102,126,234,.4)}.action-icon{font-size:18px}.loading-spinner{display:flex;justify-content:center;align-items:center;height:100vh;background:#000}.spinner{width:50px;height:50px;border:3px solid rgba(255,255,255,.1);border-top-color:#667eea;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.scroll-indicator{position:fixed;bottom:30px;left:50%;transform:translateX(-50%);z-index:50;display:flex;flex-direction:column;align-items:center;gap:8px;animation:bounce 2s infinite}@keyframes bounce{0%,100%{transform:translateX(-50%) translateY(0)}50%{transform:translateX(-50%) translateY(-10px)}}.scroll-text{font-size:12px;color:rgba(255,255,255,.6)}.arrow-down{width:20px;height:20px;border-right:2px solid rgba(255,255,255,.6);border-bottom:2px solid rgba(255,255,255,.6);transform:rotate(45deg)}.likes-panel{position:fixed;top:0;right:-400px;width:400px;height:100vh;background:rgba(10,10,10,.95);backdrop-filter:blur(20px);border-left:1px solid rgba(255,255,255,.1);z-index:101;transition:right .3s ease;overflow-y:auto;padding:80px 20px 20px}.likes-panel.active{right:0}.likes-panel-header{font-size:24px;font-weight:700;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center}.close-panel{cursor:pointer;font-size:24px;color:rgba(255,255,255,.6);transition:color .2s}.close-panel:hover{color:#fff}.liked-article-item{background:rgba(255,255,255,.05);border-radius:12px;padding:16px;margin-bottom:12px;cursor:pointer;transition:all .2s;border:1px solid rgba(255,255,255,.1)}.liked-article-item:hover{background:rgba(255,255,255,.1);transform:translateX(-5px)}.liked-article-title{font-size:16px;font-weight:600;margin-bottom:8px;line-height:1.3}.liked-article-excerpt{font-size:13px;color:rgba(255,255,255,.6);line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.liked-article-actions{display:flex;gap:10px;margin-top:10px}.mini-action{font-size:12px;padding:4px 10px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:6px;color:rgba(255,255,255,.8);cursor:pointer;transition:all .2s}.mini-action:hover{background:rgba(255,255,255,.2);color:#fff}.no-likes{text-align:center;color:rgba(255,255,255,.4);margin-top:40px}@media (max-width:768px){.header{padding:12px}.logo{font-size:24px}.controls{gap:6px}.about-button,.language-button,.likes-button{padding:6px 12px;font-size:13px;height:32px}.flag{font-size:16px}.article-content{max-width:95%;padding:16px;max-height:90vh}.article-title{font-size:24px;-webkit-line-clamp:3;margin-bottom:12px}.article-excerpt{font-size:15px;line-height:1.5;-webkit-line-clamp:8;margin-bottom:16px;max-height:none}.article-image{height:200px;margin-bottom:16px}.likes-panel{width:100%;right:-100%}.action-button{padding:10px 16px;font-size:13px;gap:6px}.action-button.primary{padding:10px 12px}.action-icon{font-size:16px}.article-actions{gap:10px}}.error-message{text-align:center;padding:20px;color:#ff6b6b}</style>
</head>
<body>
<div id="app" class="app">
<header class="header">
<div class="logo">WikiScroll</div>
<div class="controls">
<button class="about-button" onclick="W.showAbout()"><span>About</span></button>
<div class="language-selector">
<button class="language-button" id="lb"><span class="flag">üåç</span><span id="cl">English</span></button>
<div class="language-dropdown" id="ld"></div>
</div>
<button class="likes-button" id="lkb"><span>Likes</span><span class="likes-badge" id="lc" style="display:none">0</span></button>
</div>
</header>
<div class="likes-panel" id="lp">
<div class="likes-panel-header"><span>Liked Articles</span><span class="close-panel" onclick="W.toggleLikesPanel()">‚úï</span></div>
<div id="lal"></div>
</div>
<div class="feed-container" id="fc">
<div class="loading-spinner"><div class="spinner"></div></div>
</div>
<div class="scroll-indicator" id="si" style="display:none">
<span class="scroll-text">Scroll for more</span>
<div class="arrow-down"></div>
</div>
</div>
<script>
const W={
a:[],l:'en',ld:!1,lk:new Map,
langs:[['en','English','üá¨üáß'],['es','Espa√±ol','üá™üá∏'],['fr','Fran√ßais','üá´üá∑'],['de','Deutsch','üá©üá™'],['it','Italiano','üáÆüáπ'],['pt','Portugu√™s','üáµüáπ'],['ru','–†—É—Å—Å–∫–∏–π','üá∑üá∫'],['ja','Êó•Êú¨Ë™û','üáØüáµ'],['zh','‰∏≠Êñá','üá®üá≥'],['ar','ÿßŸÑÿπÿ±ÿ®Ÿäÿ©','üá∏üá¶'],['hi','‡§π‡§ø‡§®‡•ç‡§¶‡•Ä','üáÆüá≥'],['ko','ÌïúÍµ≠Ïñ¥','üá∞üá∑'],['nl','Nederlands','üá≥üá±'],['pl','Polski','üáµüá±']],
init(){
const s=localStorage.getItem('lk');
if(s)try{this.lk=new Map(JSON.parse(s))}catch{}
document.getElementById('ld').innerHTML=this.langs.map(([c,n,f])=>`<div class="language-option" data-l="${c}" data-n="${n}"><span class="flag">${f}</span> ${n}</div>`).join('');
document.getElementById('lb').onclick=()=>document.getElementById('ld').classList.toggle('active');
document.getElementById('ld').onclick=e=>{
const o=e.target.closest('.language-option');
if(o){
this.l=o.dataset.l;
document.getElementById('cl').textContent=o.dataset.n;
document.getElementById('ld').classList.remove('active');
this.a=[];
document.getElementById('fc').innerHTML='<div class="loading-spinner"><div class="spinner"></div></div>';
this.load();
}
};
document.onclick=e=>{
if(!e.target.closest('.language-selector'))
document.getElementById('ld').classList.remove('active');
};
document.getElementById('lkb').onclick=()=>this.toggleLikesPanel();
document.getElementById('fc').onscroll=()=>{
const f=document.getElementById('fc');
if(f.scrollHeight-f.scrollTop-f.clientHeight<1000&&!this.ld)this.load();
};
document.onkeydown=e=>{
const c=document.querySelectorAll('.article-card');
if(!c.length)return;
const i=Math.floor(document.getElementById('fc').scrollTop/window.innerHeight);
if(e.key==='ArrowDown'||e.key===' '){
e.preventDefault();
c[Math.min(i+1,c.length-1)].scrollIntoView({behavior:'smooth'});
}else if(e.key==='ArrowUp'){
e.preventDefault();
c[Math.max(i-1,0)].scrollIntoView({behavior:'smooth'});
}
};
this.updateLikesCount();
this.load();
},
async load(){
if(this.ld)return;
this.ld=!0;
try{
const r=await Promise.allSettled([...Array(5)].map(()=>
fetch(`https://${this.l}.wikipedia.org/api/rest_v1/page/random/summary`)
.then(r=>r.ok?r.json():null)
.then(d=>d?{id:d.pageid,t:d.title,e:d.extract||'No description available.',i:d.thumbnail?.source||'',u:d.content_urls?.desktop?.page||'#'}:null)
));
const a=r.filter(x=>x.status==='fulfilled'&&x.value).map(x=>x.value);
this.a.push(...a);
this.render(a);
if(this.a.length===5){
document.getElementById('si').style.display='flex';
setTimeout(()=>document.getElementById('si').style.display='none',5000);
}
}catch(e){
this.showError();
}finally{
this.ld=!1;
}
},
render(a){
const s=document.querySelector('.loading-spinner');
if(s)s.remove();
const f=document.getElementById('fc');
a.forEach(r=>{
if(!r)return;
const d=document.createElement('div');
d.className='article-card';
d.innerHTML=`<div class="article-background">${r.i?`<img src="${r.i}" alt="" loading="lazy">`:''}</div>
<div class="article-content">
${r.i?`<img src="${r.i}" alt="${r.t}" class="article-image" loading="lazy">`:''}
<h2 class="article-title">${r.t}</h2>
<p class="article-excerpt">${r.e}</p>
<div class="article-actions">
<button class="action-button${this.lk.has(r.id)?' liked':''}" onclick="W.toggleLike(${r.id})">
<span class="action-icon">${this.lk.has(r.id)?'‚ù§Ô∏è':'ü§ç'}</span>
<span>${this.lk.has(r.id)?'Liked':'Like'}</span>
</button>
<button class="action-button" onclick="W.share('${r.u}','${r.t.replace(/'/g,"\\'")}')">
<span class="action-icon">üì§</span><span>Share</span>
</button>
<button class="action-button primary" onclick="window.open('${r.u}','_blank')">
<span class="action-icon">üìñ</span><span>Read Full Article</span>
</button>
</div></div>`;
f.appendChild(d);
});
},
toggleLike(id){
const a=this.a.find(x=>x&&x.id===id);
if(!a)return;
if(this.lk.has(id))this.lk.delete(id);
else this.lk.set(id,a);
localStorage.setItem('lk',JSON.stringify([...this.lk]));
this.updateLikesCount();
const c=document.querySelectorAll('.article-card');
const i=this.a.indexOf(a);
if(c[i]){
const b=c[i].querySelector('.action-button');
if(b){
b.classList.toggle('liked');
b.innerHTML=this.lk.has(id)?'<span class="action-icon">‚ù§Ô∏è</span><span>Liked</span>':'<span class="action-icon">ü§ç</span><span>Like</span>';
}
}
},
updateLikesCount(){
const c=this.lk.size;
const e=document.getElementById('lc');
if(c>0){e.textContent=c;e.style.display='inline-block'}
else e.style.display='none';
},
toggleLikesPanel(){
document.getElementById('lp').classList.toggle('active');
if(document.getElementById('lp').classList.contains('active'))this.renderLikes();
},
renderLikes(){
const l=document.getElementById('lal');
if(this.lk.size===0){
l.innerHTML='<div class="no-likes">No liked articles yet.<br>Start scrolling to discover!</div>';
return;
}
l.innerHTML=[...this.lk.values()].reverse().map(a=>`
<div class="liked-article-item">
<div class="liked-article-title">${a.t}</div>
<div class="liked-article-excerpt">${a.e}</div>
<div class="liked-article-actions">
<span class="mini-action" onclick="window.open('${a.u}','_blank')">Read</span>
<span class="mini-action" onclick="W.share('${a.u}','${a.t.replace(/'/g,"\\'")}')">Share</span>
<span class="mini-action" onclick="W.removeLike(${a.id})">Remove</span>
</div></div>`).join('');
},
removeLike(id){
this.lk.delete(id);
localStorage.setItem('lk',JSON.stringify([...this.lk]));
this.updateLikesCount();
this.renderLikes();
const a=this.a.find(x=>x&&x.id===id);
if(a){
const c=document.querySelectorAll('.article-card');
const i=this.a.indexOf(a);
if(c[i]){
const b=c[i].querySelector('.action-button');
if(b){
b.classList.remove('liked');
b.innerHTML='<span class="action-icon">ü§ç</span><span>Like</span>';
}
}
}
},
share(u,t){
if(navigator.share)navigator.share({title:t,url:u}).catch(()=>{});
else navigator.clipboard.writeText(u).then(()=>alert('Link copied!')).catch(()=>{});
},
showAbout(){
alert('WikiScroll\n\nAn infinite scrolling interface for exploring random Wikipedia articles in multiple languages.\n\nSwipe or scroll to discover fascinating articles from Wikipedia!\n\nContact: contact@wikiscroll.com');
},
showError(){
const d=document.createElement('div');
d.className='article-card';
d.innerHTML='<div class="article-content"><div class="error-message"><h2>Oops! Something went wrong</h2><p>Failed to load articles. Please check your connection and try again.</p><button class="action-button" onclick="location.reload()">üîÑ Retry</button></div></div>';
document.getElementById('fc').appendChild(d);
}
};
W.init();
</script>
</body>
</html>
